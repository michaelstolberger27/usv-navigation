services:
  sim:
    build:
      context: ..                      # usv-navigation root
      dockerfile: docker/Dockerfile
      additional_contexts:
        hybrid-automaton: ../../hybrid-automaton
        unsafe-set: ../../unsafe-set
    ports:
      - "6080:6080"                    # noVNC web UI
      - "5900:5900"                    # VNC direct
    volumes:
      - ../src:/app/usv-navigation/src              # live-reload source changes
      - ../examples:/app/usv-navigation/examples
      - ../commonocean_integration:/app/usv-navigation/commonocean_integration
      - ../output:/app/usv-navigation/output        # persist output files
      - ../../commonocean-scenarios/scenarios/HandcraftedTwoVesselEncounters_01_24:/app/scenarios
    stdin_open: true
    tty: true
